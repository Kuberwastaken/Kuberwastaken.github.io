"use strict";(self.webpackChunkkuber_mehta_portfolio=self.webpackChunkkuber_mehta_portfolio||[]).push([[600],{600:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});var n=r(43),o=r(579);const s=()=>{const e=(0,n.useRef)(null),[t,r]=(0,n.useState)(!1),[s,a]=(0,n.useState)(0),[c,i]=(0,n.useState)(0),l=(0,n.useRef)({isOver:!1});(0,n.useEffect)((()=>{const e=localStorage.getItem("tetrisTopScore");e&&i(parseInt(e))}),[]),(0,n.useEffect)((()=>{const t=e.current,n=t.getContext("2d"),o=30,s=["cyan","blue","orange","yellow","green","purple","red"],u=[[[1,1,1,1]],[[1,1,1],[0,1,0]],[[1,1,1],[1,0,0]],[[1,1,1],[0,0,1]],[[1,1],[1,1]],[[1,1,0],[0,1,1]],[[0,1,1],[1,1,0]]];let f,h=Array.from({length:20},(()=>Array(10).fill(0))),v=x(),d=x(),y=Date.now(),p=0;function x(){return{shape:u[Math.floor(Math.random()*u.length)],color:s[Math.floor(Math.random()*s.length)],x:Math.floor(5)-1,y:0}}function g(e,t,r){return!l.current.isOver&&(e.x+=t,e.y+=r,!w(e)||(e.x-=t,e.y-=r,!1))}function m(e){if(l.current.isOver)return;const t=e.shape.map((e=>[...e])),r=e.x,n=e.y,o=e.shape[0].map(((t,r)=>e.shape.map((e=>e[r])).reverse()));e.shape=o;const s=[{x:0,y:0},{x:-1,y:0},{x:1,y:0},{x:-2,y:0},{x:2,y:0},{x:0,y:-1},{x:0,y:1}];for(const a of s)if(e.x=r+a.x,e.y=n+a.y,!w(e))return;e.shape=t,e.x=r,e.y=n}function w(e){return e.shape.some(((t,r)=>t.some(((t,n)=>{if(t){const t=e.x+n,o=e.y+r;return t<0||t>=10||o>=20||o>=0&&h[o][t]}return!1}))))}function k(){var e;l.current.isOver||(g(v,0,1)||((e=v).shape.forEach(((t,r)=>{t.forEach(((t,n)=>{t&&(h[e.y+r][e.x+n]=e.color)}))})),function(){let e=0;for(h=h.filter((t=>{const r=t.every((e=>e));return r&&e++,!r}));h.length<20;)h.unshift(Array(10).fill(0));e>0&&(p+=[0,40,100,300,1200][e]||0,a(p),p>c&&(i(p),localStorage.setItem("tetrisTopScore",p.toString())))}(),v=d,d=x(),w(v)&&(l.current.isOver=!0,r(!0),p>c&&(i(p),localStorage.setItem("tetrisTopScore",p.toString())),clearInterval(f))))}function S(e){if(!l.current.isOver)switch(e.key){case"ArrowLeft":g(v,-1,0);break;case"ArrowRight":g(v,1,0);break;case"ArrowDown":k();break;case"ArrowUp":m(v)}}function O(e){if(l.current.isOver)return;const r=t.getBoundingClientRect(),n=e.touches[0],o=n.clientX-r.left,s=n.clientY-r.top,a=t.width/3,c=t.height/4;s<c?m(v):s>t.height-c?k():o<a?g(v,-1,0):o>2*a&&g(v,1,0),e.preventDefault()}return window.addEventListener("keydown",S),t.addEventListener("touchstart",O),f=setInterval((function(){if(l.current.isOver)return;var e;Date.now()-y>1e3&&(k(),y=Date.now()),function(){n.clearRect(0,0,t.width,t.height);for(let e=0;e<20;e++)for(let t=0;t<10;t++)h[e][t]&&(n.fillStyle=h[e][t],n.fillRect(t*o,e*o,o,o),n.strokeRect(t*o,e*o,o,o))}(),(e=v).shape.forEach(((t,r)=>{t.forEach(((t,s)=>{t&&(n.fillStyle=e.color,n.fillRect((e.x+s)*o,(e.y+r)*o,o,o),n.strokeRect((e.x+s)*o,(e.y+r)*o,o,o))}))}))}),50),()=>{window.removeEventListener("keydown",S),t.removeEventListener("touchstart",O),clearInterval(f),l.current.isOver=!1}}),[t,s,c]);return(0,o.jsxs)("div",{className:"tetris-game-container",children:[(0,o.jsxs)("div",{className:"scoreboard",children:[(0,o.jsxs)("div",{children:["Score: ",s]}),(0,o.jsxs)("div",{children:["Top Score: ",c]})]}),(0,o.jsx)("canvas",{ref:e,width:"300",height:"600",className:"tetris-game-canvas"}),t&&(0,o.jsx)("div",{className:"game-over",children:"Game Over"}),(0,o.jsx)("button",{onClick:()=>{r(!1),a(0),l.current.isOver=!1},children:"Restart"})]})}}}]);
//# sourceMappingURL=600.92ab5da0.chunk.js.map